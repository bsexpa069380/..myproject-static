<!DOCTYPE html>
<html dir="ltr" lang="tw">
<head>

	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta http-equiv="x-ua-compatible" content="IE=edge">
	<meta name="author" content="Action Sharon James">
	<meta name="description" content="峻勝建設開發官網">

	<!-- Font Imports -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

	<!-- Core Style -->
	<link rel="stylesheet" href="/static/web/style.css">

	<!-- Font Icons -->
	<link rel="stylesheet" href="/static/web/css/font-icons.css">
	
	<!-- Plugins/Components CSS -->
	<link rel="stylesheet" href="/static/web/css/swiper.css">

	<!-- Custom CSS -->
	<link rel="stylesheet" href="/static/web/css/custom.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Document Title
	============================================= -->
	<title>邑城仰睦-峻勝築績</title>

	

</head>

<body class="stretched overlay-menu">

	<!-- Document Wrapper
	============================================= -->
	<div id="wrapper">
		
		
		<header id="header" class="full-header transparent-header transparent-header-responsive" >
			<div id="header-wrap">
				<div class="container">
					<div class="header-row">

						<!-- Logo
						============================================= -->
						<div id="logo">
							<a href="/static/web/index.html">
								<img class="logo-default" srcset="/static/web/images/logo.png" src="/static/web/images/logo.png" alt="Logo">
								<img class="logo-dark" srcset="/static/web/images/logo.png" src="/static/web/images/logo.png" alt="Logo">
							</a>
						</div><!-- #logo end -->

					

						<div class="primary-menu-trigger">
							<button class="cnvs-hamburger" type="button" title="Open Mobile Menu">
								<span class="cnvs-hamburger-box"><span class="cnvs-hamburger-inner"></span></span>
							</button>
						</div>

						<!-- Primary Navigation
						============================================= -->
						<nav class="primary-menu">
							<button class="menu-close" type="button" title="關閉選單">
								<span class="menu-close-icon"></span>
							</button>
							<ul class="menu-container">
								<li class="menu-item">
									<a class="menu-link" href="/static/web/about.html"><div>關於峻勝<br>ABOUT</div></a>
								</li>
								<li class="menu-item">
									<a class="menu-link" href="/static/web/news.html"><div>最新情報<br>NEWS</div></a>
								</li>
								<li class="menu-item">
									<a class="menu-link" href="/static/web/teams.html"><div>專業陣容<br>TEAM</div></a>
								</li>
								<li class="menu-item">
									<a class="menu-link" href="/static/web/project.html"><div>峻勝築績<br>PROJECT</div></a>
								</li>
								<li class="menu-item">
									<a class="menu-link" href="/static/web/renew.html"><div>合作專區<br>RENEW</div></a>
								</li>
								<li class="menu-item">
									<a class="menu-link" href="/static/web/service.html"><div>客户中心<br>SERVICE</div></a>
								</li>
								<li class="menu-item">
									<a class="menu-link" href="/static/web/contact.html"><div>聯絡我們<br>CONTACT</div></a>
								</li>
							</ul>

						</nav><!-- #primary-menu end -->

						

					</div>
				</div>
			</div>
			<div class="header-wrap-clone"></div>
		</header>

		<!-- 線上熱銷 -->
		<section id="hotline">
			<div class="content-wrap py-lg-0">
				<div class="container">
					<div class="row align-items-lg-center gutter-50 mb-6">
						<div class="col-lg-12 align-sel f-center mb-6">
							<div class="custom-title-box">
								<h2 class="custom-title">線上熱銷</h2>
							</div>
						</div>
					</div>
					<div class="row" id="online-sales-list">
						<!-- Online sales items will be dynamically inserted here -->
					</div>
				</div>
			</div>
		</section>
		<!-- #線上熱銷 end -->
		
		<!-- 過場線
		============================================= -->
		<div class="svg-divider mb-6">
          <svg id="" data-name="" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 1480.3 104.1">
             <polyline class="st0" points="0 .5 740.2 103.6 1480.3 .5"/>
          </svg>
        </div>
		
		<!-- #過場線 end -->
		
		<!-- 歷年業績 -->
		<section id="history">
			<div class="content-wrap py-lg-0">
				<div class="container">
					<div class="row gutter-50 mb-6">
						<div class="col-lg-12 align-sel f-center mb-6">
							<div class="custom-title-box">
								<h2 class="custom-title">歷年業績</h2>
							</div>
						</div>
					</div>
					<div class="row" id="case-history-list">
						<!-- Case history items will be dynamically inserted here -->
					</div>
				</div>
			</div>
		</section>
		<!-- #歷年業績 end -->
		

		

		
			<!-- Footer
		============================================= -->
		<footer id="footer" class="bg-primary dark border-width-1 border-f5 block-footer-1">
			<div class="container">

				<!-- Footer Widgets
				============================================= -->
				<div class="footer-widgets-wrap">

					<div class="row col-mb-50">
						<div class="col-lg-3 col-sm-12 order-2 order-lg-1">

							<div class="widget">
								<img src="/static/web/assets/footer-logo.png" alt="Image" class="footer-logo" height="60">
							</div>
							
							<p>服務時間:週一至週五(09:00〜18:00)<br>地址:新北市板橋區民生路1段33號5樓之2<br>電話:02-2951-2789</p>
							
							<div>
									<a href="#" class="social-icon border-transparent h-bg-facebook">
										<i class="fa-brands fa-facebook-f"></i>
										<i class="fa-brands fa-facebook-f"></i>
									</a>
								
								<a href="#" class="social-icon border-transparent h-bg-line">
										<i class="bi-line"></i>
										<i class="bi-line"></i>
									</a>

									<a href="#" class="social-icon border-transparent h-bg-instagram">
										<i class="bi-instagram"></i>
										<i class="bi-instagram"></i>
									</a>

									
								</div>

						</div>

						<div class="col-lg-9 col-sm-12 order-1 order-lg-2">

							<div class="row">
								<div class="col-lg-f-7 col-3 mb-5">
									<div class="widget widget_links">
										<h4 class="text-transform-none ls-0 text-center">關於峻勝<br>ABOUT</h4>
										<ul>
											<li><a href="/static/web/about.html">關於峻勝</a></li>
											<li><a href="/static/web/about.html#brand-senses">核心理念</a></li>
											<li><a href="/static/web/about.html#cooperate">緣起合建</a></li>
											<li><a href="/static/web/about.html#sustainability">永續價值</a></li>
											<li><a href="/static/web/about.html#charity">公益活動</a></li>
											<li><a href="/static/web/about.html#6s">六感建築</a></li>
										</ul>
									</div>
								</div>
								<div class="col-lg-f-7 col-3">
									<div class="widget widget_links">
										<h4 class="text-transform-none ls-0 text-center">最新情報<br>NEWS</h4>
										<ul>
											<li><a href="/static/web/news.html#case">個案新訊</a></li>
											<li><a href="/static/web/news.html#policy">政策快遞</a></li>
											<li><a href="/static/web/news.html#h-market">房市新訊</a></li>
										</ul>
									</div>
								</div>
								<div class="col-lg-f-7 col-3">
									<div class="widget widget_links">
										<h4 class="text-transform-none ls-0 text-center">專業陣容<br>TEAM</h4>
										<ul>
											<li><a href="/static/web/teams.html#create">營造陣容</a></li>
											<li><a href="/static/web/teams.html#building">建築陣容</a></li>
											<li><a href="/static/web/teams.html#design">設計陣容</a></li>
										</ul>

									</div>

								</div>
								<div class="col-lg-f-7 col-3">

									<div class="widget widget_links">

										<h4 class="text-transform-none ls-0 text-center">峻勝築績<br>PROJECT</h4>
										<ul>
										    <li><a href="/static/web/project.html#hotline">線上熱銷</a></li>
											<li><a href="/static/web/project.html#history">歷年業績</a></li>
										</ul>

									</div>

								</div>
								<div class="col-lg-f-7 col-3">
									<div class="widget widget_links">
										<h4 class="text-transform-none ls-0 text-center">合作專區<br>RENEW</h4>
										<ul>
											<li><a href="/static/web/renew.html#renewal-oldage">都更危老</a></li>
											<li><a href="/static/web/renew.html#advantages1">峻勝優勢</a></li>
											<li><a href="/static/web/renew.html#cityrenew">都更專區</a></li>
											<li><a href="/static/web/renew.html#dan-oldhouse">危老專區</a></li>
										</ul>
									</div>

								</div>
								<div class="col-lg-f-7 col-3">
									<div class="widget widget_links">
										<h4 class="text-transform-none ls-0 text-center">客户中心<br>SERVICE</h4>
										<ul>
											<li><a href="/static/web/service.html#project-progress">工程進度</a></li>
											<li><a href="/static/web/service.html#pay-history">繳款紀錄</a></li>
											<li><a href="/static/web/service.html#online-repair">線上報修</a></li>
										</ul>
									</div>

								</div>
								<div class="col-lg-f-7 col-3">
									<div class="widget widget_links">
										<h4 class="text-transform-none ls-0 text-center">聯絡我們<br>CONTACT</h4>
										<ul>
											<li><a href="/static/web/contact.html">意見回饋</a></li>
											<li><a href="/static/web/contact.html#footer">基本資料</a></li>
										</ul>
									</div>
								</div>
					
							</div>

						</div>

					</div>

				</div><!-- .footer-widgets-wrap end -->

			</div>

			<!-- Copyrights
			============================================= -->
			<div id="copyrights" class="bg-transparent">
				<div class="container">

					<div class="row col-mb-30">
						<div class="col-lg-auto text-center text-lg-start">
							<p class="mb-3"></p>
							<p class="mb-0"><a href="https://www.design-group.com.tw/" target="_blank" style="color: #C49A6C;">Designed by 鼎燁設計</a></p>
						</div>

						<div class="col-lg-auto text-center text-lg-end">
							<div class="copyright-links"><a href="#"></a> <a href="#"></a></div>
							<p class="mb-0"><span style="color: #C49A6C;">© 2024 JUN-SHENG Construction.</span></p>
						</div>
					</div>

				</div>
			</div><!-- #copyrights end -->

		</footer><!-- #footer end -->

	</div><!-- #wrapper end -->

	<!-- Go To Top
	============================================= -->
	<div id="gotoTop" class="uil uil-angle-up"></div>

	<!-- JavaScripts
	============================================= -->
	<script src="/static/web/js/plugins.min.js"></script>
	<script src="/static/web/js/functions.bundle.js"></script>
	<script src="/static/web/js/menu.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
	// Helper to create a clickable card for each item
	function createProjectHotCard(item) {
		return `
			<div class="col-md-4 col-12 mb-4">
				<a href="/static/web/project-hot.html?category=${encodeURIComponent(item.category)}" class="text-decoration-none">
					<div class="card border-0 shadow-sm h-100">
						<div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height:220px;overflow:hidden;">
							<img src="${item.cover_image || '/static/web/assets/project/01-sm.png'}" alt="${item.title}" style="max-width:100%;max-height:100%;object-fit:cover;">
						</div>
						<div class="card-body text-center">
							<h5 class="card-title" style="color:#C49A6C;">${item.title || ''}</h5>
							<div class="small text-muted">${item.category ? item.category : ''}</div>
						</div>
					</div>
				</a>
			</div>
		`;
	}

	function createProjectHistoryCard(item) {
		return `
			<div class="col-md-4 col-12 mb-4">
				<a href="/static/web/project-history.html?category=${encodeURIComponent(item.category)}" class="text-decoration-none">
					<div class="card border-0 shadow-sm h-100">
						<div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height:220px;overflow:hidden;">
							<img src="${item.cover_image || '/static/web/assets/project/01-sm.png'}" alt="${item.title}" style="max-width:100%;max-height:100%;object-fit:cover;">
						</div>
						<div class="card-body text-center">
							<h5 class="card-title" style="color:#C49A6C;">${item.title || ''}</h5>
							<div class="small text-muted">${item.category ? item.category : ''}</div>
						</div>
					</div>
				</a>
			</div>
		`;
	}

	// Fetch and render online sales, grouped by category (latest per category, schedule != 100)
	async function fetchOnlineSales() {
		try {
			const res = await fetch('/api/online-sales');
			if (!res.ok) throw new Error('Failed to fetch online sales');
			const data = await res.json();
			const container = document.getElementById('online-sales-list');
			container.innerHTML = '';
			if (!data || data.length === 0) {
				container.innerHTML = '<div class="col-12 text-center">尚無建案資料</div>';
				return;
			}
			// Group by category, keep only the latest per category where schedule != 100
			const latestByCategory = {};
			data.forEach(item => {
				if (!item.category) return;
				if (item.schedule == 100) return;
				if (!latestByCategory[item.category] || new Date(item.created_at) > new Date(latestByCategory[item.category].created_at)) {
					latestByCategory[item.category] = item;
				}
			});
			const cards = Object.values(latestByCategory)
				.sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
				.map(item => createProjectHotCard(item));
			if (cards.length === 0) {
				container.innerHTML = '<div class="col-12 text-center">尚無建案資料</div>';
			} else {
				container.innerHTML = cards.join('');
			}
		} catch (e) {
			document.getElementById('online-sales-list').innerHTML = '<div class="col-12 text-center text-danger">載入建案資料失敗</div>';
		}
	}

	// Fetch and render case history (grouped by category, schedule == 100)
	async function fetchCaseHistory() {
		try {
			const res = await fetch('/api/online-sales');
			if (!res.ok) throw new Error('Failed to fetch case history');
			const data = await res.json();
			const container = document.getElementById('case-history-list');
			container.innerHTML = '';
			if (!data || data.length === 0) {
				container.innerHTML = '<div class="col-12 text-center">尚無建案資料</div>';
				return;
			}
			// Group by category, keep only the latest per category where schedule == 100
			const latestByCategory = {};
			data.forEach(item => {
				if (!item.category) return;
				if (item.schedule != 100) return;
				if (!latestByCategory[item.category] || new Date(item.created_at) > new Date(latestByCategory[item.category].created_at)) {
					latestByCategory[item.category] = item;
				}
			});
			const cards = Object.values(latestByCategory)
				.sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
				.map(item => createProjectHistoryCard(item));
			if (cards.length === 0) {
				container.innerHTML = '<div class="col-12 text-center">尚無建案資料</div>';
			} else {
				container.innerHTML = cards.join('');
			}
		} catch (e) {
			document.getElementById('case-history-list').innerHTML = '<div class="col-12 text-center text-danger">載入建案資料失敗</div>';
		}
	}

	document.addEventListener('DOMContentLoaded', () => {
		fetchOnlineSales();
		fetchCaseHistory();
	});
	</script>

</body>
</html>